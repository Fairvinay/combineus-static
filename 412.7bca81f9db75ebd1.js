(self.webpackChunkbudget=self.webpackChunkbudget||[]).push([[412],{6571:(U,a,o)=>{"use strict";o.d(a,{R:()=>i});var e=o(5539),r=o(7303),n=o(7705),t=o(996);let i=(()=>{class s{constructor(l,f){this.expenseCategoryApi=l,this.categoriesState=f}isUpdating$(){return this.categoriesState.isUpdating$()}getExpenseCategories$(){return this.categoriesState.getExpenseCategories$()}loadExpenseCategories(){return this.expenseCategoryApi.getExpenseCategories().pipe((0,e.M)(l=>this.categoriesState.setExpenseCategories(l)))}addExpenseCategory(l){this.categoriesState.addExpenseCategory(l),this.expenseCategoryApi.createExpenseCategory(l).subscribe(f=>this.categoriesState.updateExpenseCategoryId(l,f),f=>{this.categoriesState.removeExpenseCategory(l),console.log(f)})}updateExpenseCategory(l){this.categoriesState.setUpdating(!0),this.expenseCategoryApi.updateExpenseCategory(l).subscribe(()=>this.categoriesState.updateExpenseCategory(l),f=>console.log(f),()=>this.categoriesState.setUpdating(!1))}static{this.\u0275fac=function(f){return new(f||s)(n.KVO(r.P),n.KVO(t.S))}}static{this.\u0275prov=n.jDH({token:s,factory:s.\u0275fac})}}return s})()},996:(U,a,o)=>{"use strict";o.d(a,{S:()=>n});var e=o(9928),r=o(7705);let n=(()=>{class t{constructor(){this.updating$=new e.t(!1),this.expenseCategories$=new e.t(null)}isUpdating$(){return this.updating$.asObservable()}setUpdating(s){this.updating$.next(s)}getExpenseCategories$(){return this.expenseCategories$.asObservable()}setExpenseCategories(s){this.expenseCategories$.next(s)}addExpenseCategory(s){const u=this.expenseCategories$.getValue();this.expenseCategories$.next([...u,s])}updateExpenseCategory(s){const u=this.expenseCategories$.getValue(),l=u.findIndex(f=>f.id===s.id);u[l]=s,this.expenseCategories$.next([...u])}updateExpenseCategoryId(s,u){const l=this.expenseCategories$.getValue(),f=l.findIndex(v=>v===s);l[f]=u,this.expenseCategories$.next([...l])}removeExpenseCategory(s){const u=this.expenseCategories$.getValue();this.expenseCategories$.next(u.filter(l=>l!==s))}static{this.\u0275fac=function(u){return new(u||t)}}static{this.\u0275prov=r.jDH({token:t,factory:t.\u0275fac})}}return t})()},1430:(U,a,o)=>{"use strict";o.d(a,{_:()=>w});var e=o(7705),r=o(9417),n=o(177),t=o(852),i=o(8834),s=o(9631),u=o(2102);function l(h,E){if(1&h&&(e.j41(0,"mat-form-field",5),e.nrm(1,"input",6),e.k0s()),2&h){const g=E.index;e.R7$(1),e.Mz_("placeholder","Pattern ",g,""),e.Y8G("formControlName",g)}}function f(h,E){1&h&&(e.j41(0,"button",11),e.EFF(1,"Delete"),e.k0s())}function v(h,E){if(1&h){const g=e.RV6();e.j41(0,"button",12),e.bIt("click",function(){e.eBV(g);const C=e.XpG(2);return e.Njj(C.addCategory())}),e.EFF(1," Add "),e.k0s()}if(2&h){const g=e.XpG(2);e.Y8G("disabled",g.categoryForm.invalid)}}function _(h,E){if(1&h){const g=e.RV6();e.j41(0,"button",12),e.bIt("click",function(){e.eBV(g);const C=e.XpG(2);return e.Njj(C.updateCategory())}),e.EFF(1," Update "),e.k0s()}if(2&h){const g=e.XpG(2);e.Y8G("disabled",g.categoryForm.invalid)}}function y(h,E){if(1&h){const g=e.RV6();e.j41(0,"div",7),e.DNE(1,f,2,0,"button",8),e.j41(2,"button",9),e.bIt("click",function(){e.eBV(g);const C=e.XpG();return e.Njj(C.addPattern())}),e.EFF(3,"Add pattern"),e.k0s(),e.DNE(4,v,2,1,"button",10),e.DNE(5,_,2,1,"button",10),e.k0s()}if(2&h){const g=e.XpG();e.R7$(1),e.Y8G("ngIf",g.editMode),e.R7$(3),e.Y8G("ngIf",!g.editMode),e.R7$(1),e.Y8G("ngIf",g.editMode)}}const b=function(){return["OWNER"]};let T=(()=>{class h{constructor(g){this.fb=g,this.editMode=!1,this.categoryAdded=new e.bkB,this.categoryUpdated=new e.bkB}ngOnInit(){const g=this.category.counterpartyPatterns.map(p=>this.createPatternInput(p));this.categoryForm=this.fb.group({id:[this.category.id],name:[this.category.name,r.k0.required],counterpartyPatterns:this.fb.array(g)})}isDirty(){return this.categoryForm.dirty}addPattern(){this.patterns.push(this.createPatternInput(""))}addCategory(){this.categoryAdded.emit(this.categoryForm.value),this.categoryForm.reset()}updateCategory(){this.categoryUpdated.emit(this.categoryForm.value),this.categoryForm.markAsPristine()}get patterns(){return this.categoryForm.get("counterpartyPatterns")}createPatternInput(g){return new r.MJ(g,[r.k0.required])}static{this.\u0275fac=function(p){return new(p||h)(e.rXU(r.ok))}}static{this.\u0275cmp=e.VBU({type:h,selectors:[["category-form"]],inputs:{editMode:"editMode",category:"category"},outputs:{categoryAdded:"categoryAdded",categoryUpdated:"categoryUpdated"},decls:7,vars:4,consts:[["novalidate","",3,"formGroup"],["matInput","","placeholder","Category name","formControlName","name"],["formArrayName","counterpartyPatterns"],["class","pattern",4,"ngFor","ngForOf"],["class","actions",4,"forRoles"],[1,"pattern"],["matInput","",3,"placeholder","formControlName"],[1,"actions"],["mat-button","","color","primary",4,"ngIf"],["mat-button","","color","primary",3,"click"],["mat-button","","color","primary",3,"disabled","click",4,"ngIf"],["mat-button","","color","primary"],["mat-button","","color","primary",3,"disabled","click"]],template:function(p,C){1&p&&(e.j41(0,"form",0)(1,"div")(2,"mat-form-field"),e.nrm(3,"input",1),e.k0s()(),e.j41(4,"div",2),e.DNE(5,l,2,2,"mat-form-field",3),e.k0s()(),e.DNE(6,y,6,3,"div",4)),2&p&&(e.Y8G("formGroup",C.categoryForm),e.R7$(5),e.Y8G("ngForOf",C.patterns.controls),e.R7$(1),e.Y8G("forRoles",e.lJ4(3,b)))},dependencies:[n.Sq,n.bT,t.G,i.$z,s.fg,u.rl,r.qT,r.me,r.BC,r.cb,r.j4,r.JD,r.v8],styles:[".actions[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse}.pattern[_ngcontent-%COMP%]{margin-right:10px}"],changeDetection:0})}}return h})();var D=o(9454);function P(h,E){if(1&h){const g=e.RV6();e.j41(0,"mat-expansion-panel")(1,"mat-expansion-panel-header")(2,"mat-panel-title"),e.EFF(3),e.k0s()(),e.j41(4,"category-form",1),e.bIt("categoryUpdated",function(C){e.eBV(g);const $=e.XpG();return e.Njj($.updateCategory(C))}),e.k0s()()}if(2&h){const g=E.$implicit;e.R7$(3),e.SpI(" ",g.name," "),e.R7$(1),e.Y8G("editMode",!0)("category",g)}}let B=(()=>{class h{constructor(){this.categoryUpdated=new e.bkB}updateCategory(g){this.categoryUpdated.emit(g)}isAnyFormDirty(){return this.categoryForms.reduce((g,p)=>p.isDirty()||g,!1)}static{this.\u0275fac=function(p){return new(p||h)}}static{this.\u0275cmp=e.VBU({type:h,selectors:[["category-list"]],viewQuery:function(p,C){if(1&p&&e.GBs(T,5),2&p){let $;e.mGM($=e.lsd())&&(C.categoryForms=$)}},inputs:{categories$:"categories$"},outputs:{categoryUpdated:"categoryUpdated"},decls:2,vars:3,consts:[[4,"ngFor","ngForOf"],[3,"editMode","category","categoryUpdated"]],template:function(p,C){1&p&&(e.DNE(0,P,5,3,"mat-expansion-panel",0),e.nI1(1,"async")),2&p&&e.Y8G("ngForOf",e.bMT(1,1,C.categories$))},dependencies:[n.Sq,D.GK,D.Z2,D.WN,T,n.Jj],styles:["[_nghost-%COMP%]{margin-top:10px;display:block}mat-expansion-panel[_ngcontent-%COMP%]{margin:0 10px;border-radius:0}mat-expansion-panel[_ngcontent-%COMP%]:first-child{border-top-left-radius:4px;border-top-right-radius:4px}mat-expansion-panel[_ngcontent-%COMP%]:last-child{border-bottom-left-radius:4px;border-bottom-right-radius:4px}"],changeDetection:0})}}return h})();var N=o(6571),F=o(9441),S=o(5596),k=o(9183);function x(h,E){1&h&&e.nrm(0,"mat-spinner")}function I(h,E){if(1&h&&(e.j41(0,"div",3),e.DNE(1,x,1,0,"mat-spinner",4),e.nI1(2,"async"),e.k0s()),2&h){const g=e.XpG();e.R7$(1),e.Y8G("ngIf",e.bMT(2,1,g.isUpdating$))}}function A(h,E){if(1&h){const g=e.RV6();e.j41(0,"mat-card",5)(1,"mat-card-header")(2,"mat-card-title"),e.EFF(3,"Add new category"),e.k0s()(),e.j41(4,"mat-card-content")(5,"category-form",6),e.bIt("categoryAdded",function(C){e.eBV(g);const $=e.XpG();return e.Njj($.addCategory(C))}),e.k0s()()()}if(2&h){const g=e.XpG();e.R7$(5),e.Y8G("category",g.newCategory)}}const R=function(){return["OWNER"]};let w=(()=>{class h{constructor(g){this.categoriesFacade=g,this.newCategory=new F.L,this.isUpdating$=g.isUpdating$(),this.expenseCategories$=g.getExpenseCategories$()}addCategory(g){this.categoriesFacade.addExpenseCategory(g)}updateCategory(g){this.categoriesFacade.updateExpenseCategory(g)}isAnyFormDirty(){return this.categoryForm?.isDirty()||this.categoryList.isAnyFormDirty()}static{this.\u0275fac=function(p){return new(p||h)(e.rXU(N.R))}}static{this.\u0275cmp=e.VBU({type:h,selectors:[["categories"]],viewQuery:function(p,C){if(1&p&&(e.GBs(T,5),e.GBs(B,7)),2&p){let $;e.mGM($=e.lsd())&&(C.categoryForm=$.first),e.mGM($=e.lsd())&&(C.categoryList=$.first)}},decls:4,vars:6,consts:[["class","loading-shade",4,"ngIf"],["class","form",4,"forRoles"],[3,"categories$","categoryUpdated"],[1,"loading-shade"],[4,"ngIf"],[1,"form"],[3,"category","categoryAdded"]],template:function(p,C){1&p&&(e.DNE(0,I,3,3,"div",0),e.nI1(1,"async"),e.DNE(2,A,6,1,"mat-card",1),e.j41(3,"category-list",2),e.bIt("categoryUpdated",function(j){return C.updateCategory(j)}),e.k0s()),2&p&&(e.Y8G("ngIf",e.bMT(1,3,C.isUpdating$)),e.R7$(2),e.Y8G("forRoles",e.lJ4(5,R)),e.R7$(1),e.Y8G("categories$",C.expenseCategories$))},dependencies:[n.bT,t.G,S.RN,S.m2,S.MM,S.dh,k.LG,T,B,n.Jj],styles:["mat-card.form[_ngcontent-%COMP%]{margin:10px}mat-card-header.mat-card-header[_ngcontent-%COMP%]{margin:-4px 0 0 -8px!important}mat-card-title.mat-card-title[_ngcontent-%COMP%]{font-size:20px!important}.loading-shade[_ngcontent-%COMP%]{position:absolute;inset:0;background:rgba(0,0,0,.15);z-index:1;display:flex;align-items:center;justify-content:center}"],changeDetection:0})}}return h})()},1412:(U,a,o)=>{"use strict";o.r(a),o.d(a,{SettingsModule:()=>St});var e=o(9417),r=o(3887),n=o(467),t=o(7705),i=o(177),s=o(8314);function u(d,L){if(1&d&&t.nrm(0,"canvas",1),2&d){const c=t.XpG();t.Y8G("qrCode",c.value)("qrCodeErrorCorrectionLevel",c.errorCorrectionLevel)("qrCodeCenterImageSrc",c.centerImageSrc)("qrCodeCenterImageWidth",c.centerImageSize)("qrCodeCenterImageHeight",c.centerImageSize)("qrCodeMargin",c.margin)("width",c.size)("height",c.size)("darkColor",c.darkColor)("lightColor",c.lightColor)}}const l=/^#(?:[0-9a-fA-F]{3,4}){1,2}$/;let f=(()=>{class d{constructor(c){this.viewContainerRef=c,this.errorCorrectionLevel=d.DEFAULT_ERROR_CORRECTION_LEVEL,this.darkColor="#000000FF",this.lightColor="#FFFFFFFF",this.margin=16}ngOnChanges(){var c=this;return(0,n.A)(function*(){if(!c.value)return;c.version&&c.version>40?(console.warn("[qrCode] max version is 40, clamping"),c.version=40):c.version&&c.version<1?(console.warn("[qrCode] min version is 1, clamping"),c.version=1):void 0!==c.version&&isNaN(c.version)&&(console.warn("[qrCode] version should be set to a number, defaulting to auto"),c.version=void 0);const m=c.viewContainerRef.element.nativeElement;if(!m)return;const M=m.getContext("2d");M&&M.clearRect(0,0,M.canvas.width,M.canvas.height);const G=c.errorCorrectionLevel??d.DEFAULT_ERROR_CORRECTION_LEVEL,nt=l.test(c.darkColor)?c.darkColor:void 0,at=l.test(c.lightColor)?c.lightColor:void 0;(0,t.naY)()&&(!nt&&c.darkColor&&console.error("[ng-qrcode] darkColor set to invalid value, must be RGBA hex color string, eg: #3050A1FF"),!at&&c.lightColor&&console.error("[ng-qrcode] lightColor set to invalid value, must be RGBA hex color string, eg: #3050A130")),yield s.toCanvas(m,c.value,{version:c.version,errorCorrectionLevel:G,width:c.width,margin:c.margin,color:{dark:nt,light:at}});const it=c.centerImageSrc,W=v(c.centerImageWidth,d.DEFAULT_CENTER_IMAGE_SIZE),Z=v(c.centerImageHeight,d.DEFAULT_CENTER_IMAGE_SIZE);if(it&&M){c.centerImage||(c.centerImage=new Image(W,Z)),it!==c.centerImage?.src&&(c.centerImage.src=it),W!==c.centerImage.width&&(c.centerImage.width=W),Z!==c.centerImage.height&&(c.centerImage.height=Z);const ct=c.centerImage;ct.onload=()=>{M.drawImage(ct,m.width/2-W/2,m.height/2-Z/2,W,Z)}}})()}}return d.DEFAULT_ERROR_CORRECTION_LEVEL="M",d.DEFAULT_CENTER_IMAGE_SIZE=40,d.\u0275fac=function(c){return new(c||d)(t.rXU(t.c1b))},d.\u0275dir=t.FsC({type:d,selectors:[["canvas","qrCode",""]],inputs:{value:["qrCode","value"],version:["qrCodeVersion","version"],errorCorrectionLevel:["qrCodeErrorCorrectionLevel","errorCorrectionLevel"],width:"width",height:"height",darkColor:"darkColor",lightColor:"lightColor",centerImageSrc:["qrCodeCenterImageSrc","centerImageSrc"],centerImageWidth:["qrCodeCenterImageWidth","centerImageWidth"],centerImageHeight:["qrCodeCenterImageHeight","centerImageHeight"],margin:["qrCodeMargin","margin"]},features:[t.OA$]}),d})();function v(d,L){return void 0===d||""===d?L:"string"==typeof d?parseInt(d,10):d}let _=(()=>{class d{}return d.\u0275fac=function(c){return new(c||d)},d.\u0275cmp=t.VBU({type:d,selectors:[["qr-code"]],inputs:{value:"value",size:"size",darkColor:"darkColor",lightColor:"lightColor",errorCorrectionLevel:"errorCorrectionLevel",centerImageSrc:"centerImageSrc",centerImageSize:"centerImageSize",margin:"margin"},decls:1,vars:1,consts:[[3,"qrCode","qrCodeErrorCorrectionLevel","qrCodeCenterImageSrc","qrCodeCenterImageWidth","qrCodeCenterImageHeight","qrCodeMargin","width","height","darkColor","lightColor",4,"ngIf"],[3,"qrCode","qrCodeErrorCorrectionLevel","qrCodeCenterImageSrc","qrCodeCenterImageWidth","qrCodeCenterImageHeight","qrCodeMargin","width","height","darkColor","lightColor"]],template:function(c,m){1&c&&t.DNE(0,u,1,10,"canvas",0),2&c&&t.Y8G("ngIf",m.value)},dependencies:[i.bT,f],encapsulation:2}),d})(),y=(()=>{class d{}return d.\u0275fac=function(c){return new(c||d)},d.\u0275mod=t.$C({type:d}),d.\u0275inj=t.G2t({imports:[[i.MD]]}),d})();var b=o(1016),T=o(1626);let D=(()=>{class d{constructor(c){this.http=c,this.API_URL=`${b.$.apiUrl}/secret`}getSecret(){return this.http.get(this.API_URL)}static{this.\u0275fac=function(m){return new(m||d)(t.KVO(T.Qq))}}static{this.\u0275prov=t.jDH({token:d,factory:d.\u0275fac})}}return d})(),P=(()=>{class d{constructor(c){this.http=c,this.API_URL=`${b.$.apiUrl}/users`}getUsers(){return this.http.get(this.API_URL)}createUser(c){return this.http.post(this.API_URL,c)}patchUser(c,m){return this.http.patch(`${this.API_URL}/${c}`,m)}deleteUser(c){return this.http.delete(`${this.API_URL}/${c}`)}static{this.\u0275fac=function(m){return new(m||d)(t.KVO(T.Qq))}}static{this.\u0275prov=t.jDH({token:d,factory:d.\u0275fac})}}return d})(),B=(()=>{class d{constructor(c,m){this.userApi=c,this.secretApi=m}getUsers(){return this.userApi.getUsers()}createUser(c){return this.userApi.createUser(c)}deleteUser(c){return this.userApi.deleteUser(c)}toggleTfa(c,m){return this.userApi.patchUser(c,{tfa:m})}getSecret(){return this.secretApi.getSecret()}static{this.\u0275fac=function(m){return new(m||d)(t.KVO(P),t.KVO(D))}}static{this.\u0275prov=t.jDH({token:d,factory:d.\u0275fac})}}return d})(),N=(()=>{class d{static{this.\u0275fac=function(m){return new(m||d)}}static{this.\u0275mod=t.$C({type:d})}static{this.\u0275inj=t.G2t({providers:[B,P,D],imports:[r.G,e.X1,e.YN,y]})}}return d})();var F=o(2091),S=o(1430),k=o(6850);function x(d,L){if(1&d&&(t.j41(0,"a",2,3),t.EFF(2),t.nI1(3,"titlecase"),t.k0s()),2&d){const c=L.$implicit,m=t.sdS(1);t.Y8G("routerLink",c)("active",m.isActive),t.R7$(2),t.JRh(t.bMT(3,3,c))}}let I=(()=>{class d{constructor(c,m){this.router=c,this.route=m,this.forms=[],this.menuItems=["account","categories"]}ngOnInit(){this.router.navigate(["account"],{relativeTo:this.route})}static{this.\u0275fac=function(m){return new(m||d)(t.rXU(F.Ix),t.rXU(F.nX))}}static{this.\u0275cmp=t.VBU({type:d,selectors:[["settings"]],viewQuery:function(m,M){if(1&m&&t.GBs(S._,5),2&m){let G;t.mGM(G=t.lsd())&&(M.categoriesComponent=G.first)}},decls:3,vars:1,consts:[["mat-tab-nav-bar",""],["mat-tab-link","","routerLinkActive","",3,"routerLink","active",4,"ngFor","ngForOf"],["mat-tab-link","","routerLinkActive","",3,"routerLink","active"],["link","routerLinkActive"]],template:function(m,M){1&m&&(t.j41(0,"nav",0),t.DNE(1,x,4,5,"a",1),t.k0s(),t.nrm(2,"router-outlet")),2&m&&(t.R7$(1),t.Y8G("ngForOf",M.menuItems))},dependencies:[i.Sq,k.Bu,k.Ql,F.n3,F.Wk,F.wQ,i.PV],encapsulation:2})}}return d})();var A=o(9159),R=o(4526),w=o(4421),h=o(8728),E=o(9090),g=o(5539),p=o(3921),C=o(5006),$=o(3767),j=o(4006);class q{}var z=o(8834),ot=o(9631),H=o(2102),K=o(2798),tt=o(6600);function X(d,L){if(1&d&&(t.j41(0,"mat-option",7),t.EFF(1),t.k0s()),2&d){const c=L.$implicit;t.Y8G("value",c),t.R7$(1),t.SpI(" ",c," ")}}let rt=(()=>{class d{constructor(c,m,M){this.fb=c,this.dialogRef=m,this.data=M}ngOnInit(){this.user=new q,this.roles=["OWNER","READER"],this.inProgress=!1,this.submitText="Create",this.userForm=this.fb.group({email:["",[e.k0.required,e.k0.email]],role:["",e.k0.required]})}submit(){this.inProgress=!0,this.submitText="Please wait...";const c=Object.assign(new q,this.userForm.value);this.data.callback$(c).subscribe(()=>this.dialogRef.close())}cancel(){this.dialogRef.close()}static{this.\u0275fac=function(m){return new(m||d)(t.rXU(e.ok),t.rXU(j.CP),t.rXU(j.Vh))}}static{this.\u0275cmp=t.VBU({type:d,selectors:[["user-dialog"]],decls:15,vars:4,consts:[[3,"formGroup"],["matInput","","type","email","placeholder","User email","formControlName","email"],["formControlName","role"],[3,"value",4,"ngFor","ngForOf"],[1,"controls"],["mat-raised-button","","color","primary",3,"disabled","click"],["mat-raised-button","","color","accent",3,"click"],[3,"value"]],template:function(m,M){1&m&&(t.j41(0,"h2"),t.EFF(1,"Add a user to the account"),t.k0s(),t.j41(2,"form",0)(3,"mat-form-field"),t.nrm(4,"input",1),t.k0s(),t.j41(5,"mat-form-field")(6,"mat-label"),t.EFF(7,"Role"),t.k0s(),t.j41(8,"mat-select",2),t.DNE(9,X,2,2,"mat-option",3),t.k0s()(),t.j41(10,"div",4)(11,"button",5),t.bIt("click",function(){return M.submit()}),t.EFF(12),t.k0s(),t.j41(13,"button",6),t.bIt("click",function(){return M.cancel()}),t.EFF(14,"Cancel"),t.k0s()()()),2&m&&(t.R7$(2),t.Y8G("formGroup",M.userForm),t.R7$(7),t.Y8G("ngForOf",M.roles),t.R7$(2),t.Y8G("disabled",!M.userForm.valid||M.inProgress),t.R7$(1),t.SpI(" ",M.submitText," "))},dependencies:[i.Sq,z.$z,ot.fg,H.rl,H.nJ,K.VO,tt.wT,e.qT,e.me,e.BC,e.cb,e.j4,e.JD],styles:[".mat-dialog-container{border-radius:0}.mat-form-field{width:100%}.controls{display:flex;position:fixed;width:calc(100% - 40px);padding:0 20px;bottom:20px;left:0}.controls button{flex-grow:1}.controls button:nth-of-type(1){margin-right:10px}.controls button:nth-of-type(2){margin-left:10px}\n"],encapsulation:2})}}return d})(),J=(()=>{class d{constructor(c,m){this.dialogRef=c,this.keyuri=m}static{this.\u0275fac=function(m){return new(m||d)(t.rXU(j.CP),t.rXU(j.Vh))}}static{this.\u0275cmp=t.VBU({type:d,selectors:[["secret-dialog"]],decls:3,vars:1,consts:[["size","300","errorCorrectionLevel","H",3,"value"]],template:function(m,M){1&m&&(t.j41(0,"p"),t.EFF(1,"Scan QR code in Google Authenticator"),t.k0s(),t.nrm(2,"qr-code",0)),2&m&&(t.R7$(2),t.Y8G("value",M.keyuri))},dependencies:[_],encapsulation:2})}}return d})();var et=o(7381),O=o(5416),V=o(852),Y=o(9213),Q=o(4823),st=o(5596),lt=o(9183),ut=o(450);function dt(d,L){1&d&&(t.j41(0,"div",3),t.nrm(1,"mat-spinner"),t.k0s())}function gt(d,L){if(1&d){const c=t.RV6();t.j41(0,"mat-card-actions")(1,"button",4),t.bIt("click",function(){t.eBV(c);const M=t.XpG();return t.Njj(M.logoutAuth0())}),t.EFF(2," Auth0 logout "),t.k0s()()}}function ft(d,L){if(1&d){const c=t.RV6();t.j41(0,"mat-card")(1,"h2"),t.EFF(2,"Two-factor authentication"),t.k0s(),t.j41(3,"mat-slide-toggle",5),t.bIt("ngModelChange",function(M){t.eBV(c);const G=t.XpG();return t.Njj(G.tfaEnabled=M)})("change",function(M){t.eBV(c);const G=t.XpG();return t.Njj(G.updateTfa(M))}),t.EFF(4),t.k0s(),t.j41(5,"button",6),t.bIt("click",function(){t.eBV(c);const M=t.XpG();return t.Njj(M.showSecretCode())}),t.EFF(6),t.k0s()()}if(2&d){const c=t.XpG();t.R7$(3),t.Y8G("ngModel",c.tfaEnabled)("disabled",c.isLoading),t.R7$(1),t.JRh(c.tfaEnabled?"Enabled":"Disabled"),t.R7$(2),t.SpI(" ",c.showSecretLabel," ")}}function ht(d,L){1&d&&t.nrm(0,"mat-header-row")}function mt(d,L){1&d&&t.nrm(0,"mat-row")}function pt(d,L){1&d&&(t.j41(0,"mat-header-cell",20),t.EFF(1,"User email"),t.k0s())}function Ct(d,L){if(1&d&&(t.j41(0,"mat-cell",20),t.EFF(1),t.k0s()),2&d){const c=L.$implicit;t.R7$(1),t.SpI(" ",c.email," ")}}function yt(d,L){1&d&&(t.j41(0,"mat-header-cell"),t.EFF(1,"Role"),t.k0s())}function Et(d,L){if(1&d&&(t.j41(0,"mat-cell"),t.EFF(1),t.k0s()),2&d){const c=L.$implicit;t.R7$(1),t.SpI(" ",c.role," ")}}function wt(d,L){1&d&&(t.j41(0,"mat-header-cell"),t.EFF(1,"Confirmed"),t.k0s())}function It(d,L){if(1&d&&(t.j41(0,"mat-cell"),t.EFF(1),t.k0s()),2&d){const c=L.$implicit;t.R7$(1),t.SpI(" ",c.confirmed?"Yes":"No"," ")}}function At(d,L){1&d&&(t.j41(0,"mat-header-cell",21),t.EFF(1,"Actions"),t.k0s())}function bt(d,L){if(1&d){const c=t.RV6();t.j41(0,"mat-cell",21)(1,"button",22),t.bIt("click",function(){const G=t.eBV(c).$implicit,nt=t.XpG(2);return t.Njj(nt.confirmDelete(G.id))}),t.nrm(2,"mat-icon",23),t.k0s()()}if(2&d){const c=L.$implicit,m=t.XpG(2);t.R7$(1),t.Y8G("disabled",c.email===m.ownEmail)}}function Rt(d,L){if(1&d){const c=t.RV6();t.j41(0,"mat-card")(1,"h2"),t.EFF(2,"Account users"),t.k0s(),t.j41(3,"mat-table",7),t.DNE(4,ht,1,0,"mat-header-row",8),t.DNE(5,mt,1,0,"mat-row",9),t.qex(6,10),t.DNE(7,pt,2,0,"mat-header-cell",11),t.DNE(8,Ct,2,1,"mat-cell",12),t.bVm(),t.qex(9,13),t.DNE(10,yt,2,0,"mat-header-cell",14),t.DNE(11,Et,2,1,"mat-cell",15),t.bVm(),t.qex(12,16),t.DNE(13,wt,2,0,"mat-header-cell",14),t.DNE(14,It,2,1,"mat-cell",15),t.bVm(),t.qex(15,17),t.DNE(16,At,2,0,"mat-header-cell",18),t.DNE(17,bt,3,1,"mat-cell",19),t.bVm(),t.k0s(),t.j41(18,"mat-card-actions")(19,"button",4),t.bIt("click",function(){t.eBV(c);const M=t.XpG();return t.Njj(M.openUserDialog())}),t.EFF(20," Add user "),t.k0s()()()}if(2&d){const c=t.XpG();t.R7$(3),t.Y8G("dataSource",c.users),t.R7$(1),t.Y8G("matHeaderRowDef",c.displayedColumns),t.R7$(1),t.Y8G("matRowDefColumns",c.displayedColumns)}}const vt=function(){return["owner"]},Tt=[{path:"",component:I,children:[{path:"account",component:(()=>{class d{constructor(c,m,M,G){this.dialog=c,this.snackBar=m,this.authService=M,this.accountService=G,this.isAuth0=!1,this.tfaEnabled=!1,this.isLoading=!1,this.users=new A.I6,this.displayedColumns=["email","role","confirmed","actions"],this.showSecretLabel="Show secret code"}ngOnInit(){this.authService.getCurrentUser$().subscribe(c=>{this.ownEmail=c.email,this.ownName=c.email.split("@")[1],this.tfaEnabled=c.tfa,this.isAuth0=this.authService.isAuth0User(c)}),this.authService.getUserRole$().pipe((0,h.p)(c=>"OWNER"===c),(0,E.n)(()=>this.loadUsers$())).subscribe()}openUserDialog(){this.dialog.open(rt,{data:{callback$:this.getCreateUserCallback$()},maxWidth:"100vw",maxHeight:"100vh",height:"100%",width:"100%"})}updateTfa(c){const m=c.checked;this.isLoading=!0,this.authService.getCurrentUser$().pipe((0,E.n)(M=>this.accountService.toggleTfa(M.id,m)),(0,g.M)(()=>this.isLoading=!1),(0,p.W)(M=>(this.isLoading=!1,this.tfaEnabled=!m,this.showResultSnackbar(M.error?.msg??"Unknown error"),(0,R.$)(M)))).subscribe(()=>this.showResultSnackbar("Two-factor authentication "+(m?"enabled":"disabled")))}showSecretCode(){this.showSecretLabel="Please wait...",this.accountService.getSecret().subscribe(c=>{this.dialog.open(J,{data:c.keyuri}),this.showSecretLabel="Show secret code"})}confirmDelete(c){this.isLoading=!0,this.accountService.deleteUser(c).pipe((0,E.n)(()=>this.loadUsers$()),(0,g.M)(()=>this.isLoading=!1),(0,p.W)(m=>(this.isLoading=!1,this.showResultSnackbar(m.error?.msg??"Unknown error"),(0,R.$)(m)))).subscribe(()=>this.showResultSnackbar("User deleted"))}logoutAuth0(){this.authService.logoutAuth0()}loadUsers$(){return this.accountService.getUsers().pipe((0,C.T)(c=>this.users.data=c))}getCreateUserCallback$(){return c=>this.accountService.createUser(c).pipe((0,E.n)(()=>this.loadUsers$()),(0,g.M)(()=>this.showResultSnackbar("Success")),(0,p.W)(m=>(this.showResultSnackbar(m.error?.msg??"Unknown error"),(0,w.of)(m))))}showResultSnackbar(c){this.snackBar.openFromComponent(et.h,{duration:3e3,data:c})}static{this.\u0275fac=function(m){return new(m||d)(t.rXU(j.bZ),t.rXU(O.UG),t.rXU($.u),t.rXU(B))}}static{this.\u0275cmp=t.VBU({type:d,selectors:[["account"]],decls:12,vars:7,consts:[["class","loading-shade",4,"ngIf"],[4,"ngIf"],[4,"forRoles"],[1,"loading-shade"],["mat-raised-button","","color","primary",3,"click"],[3,"ngModel","disabled","ngModelChange","change"],["mat-button","","color","primary",3,"click"],[3,"dataSource"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["matColumnDef","email"],["class","wide",4,"matHeaderCellDef"],["class","wide",4,"matCellDef"],["matColumnDef","role"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","confirmed"],["matColumnDef","actions"],["class","pull-right",4,"matHeaderCellDef"],["class","pull-right",4,"matCellDef"],[1,"wide"],[1,"pull-right"],["mat-icon-button","","color","primary","matTooltip","Delete",3,"disabled","click"],["svgIcon","remove"]],template:function(m,M){1&m&&(t.j41(0,"main"),t.DNE(1,dt,2,0,"div",0),t.j41(2,"mat-card")(3,"h2"),t.EFF(4,"User profile"),t.k0s(),t.j41(5,"div"),t.EFF(6),t.k0s(),t.j41(7,"div"),t.EFF(8),t.k0s(),t.DNE(9,gt,3,0,"mat-card-actions",1),t.k0s(),t.DNE(10,ft,7,4,"mat-card",1),t.DNE(11,Rt,21,3,"mat-card",2),t.k0s()),2&m&&(t.R7$(1),t.Y8G("ngIf",M.isLoading),t.R7$(5),t.JRh(M.ownEmail),t.R7$(2),t.JRh(M.ownName),t.R7$(1),t.Y8G("ngIf",M.isAuth0),t.R7$(1),t.Y8G("ngIf",!M.isAuth0),t.R7$(1),t.Y8G("forRoles",t.lJ4(6,vt)))},dependencies:[i.bT,V.G,Y.An,z.$z,z.iY,Q.oV,st.RN,st.YY,lt.LG,A.Zl,A.tL,A.ji,A.cC,A.YV,A.iL,A.KS,A.$R,A.YZ,A.NB,ut.sG,e.BC,e.vS],styles:["[_nghost-%COMP%]{padding:0 10px;display:block}.wide[_ngcontent-%COMP%]{min-width:40%}.pull-right[_ngcontent-%COMP%]{flex-direction:row-reverse}.loading-shade[_ngcontent-%COMP%]{position:absolute;inset:0;background:rgba(0,0,0,.15);z-index:1;display:flex;align-items:center;justify-content:center}mat-card[_ngcontent-%COMP%]{margin-top:20px}mat-card-actions[_ngcontent-%COMP%]{padding:20px 10px 10px!important;text-align:right}"]})}}return d})()},{path:"categories",loadChildren:()=>o.e(260).then(o.bind(o,9260)).then(d=>d.CategoriesModule)}]}];let Ft=(()=>{class d{static{this.\u0275fac=function(m){return new(m||d)}}static{this.\u0275mod=t.$C({type:d})}static{this.\u0275inj=t.G2t({imports:[F.iI.forChild(Tt),F.iI]})}}return d})(),St=(()=>{class d{static{this.\u0275fac=function(m){return new(m||d)}}static{this.\u0275mod=t.$C({type:d})}static{this.\u0275inj=t.G2t({imports:[r.G,N,e.X1,Ft]})}}return d})()},243:U=>{"use strict";var a={single_source_shortest_paths:function(o,e,r){var n={},t={};t[e]=0;var s,u,l,f,v,y,i=a.PriorityQueue.make();for(i.push(e,0);!i.empty();)for(l in f=(s=i.pop()).cost,v=o[u=s.value]||{})v.hasOwnProperty(l)&&(y=f+v[l],(typeof t[l]>"u"||t[l]>y)&&(t[l]=y,i.push(l,y),n[l]=u));if(typeof r<"u"&&typeof t[r]>"u"){var D=["Could not find a path from ",e," to ",r,"."].join("");throw new Error(D)}return n},extract_shortest_path_from_predecessor_list:function(o,e){for(var r=[],n=e;n;)r.push(n),n=o[n];return r.reverse(),r},find_path:function(o,e,r){var n=a.single_source_shortest_paths(o,e,r);return a.extract_shortest_path_from_predecessor_list(n,r)},PriorityQueue:{make:function(o){var n,e=a.PriorityQueue,r={};for(n in o=o||{},e)e.hasOwnProperty(n)&&(r[n]=e[n]);return r.queue=[],r.sorter=o.sorter||e.default_sorter,r},default_sorter:function(o,e){return o.cost-e.cost},push:function(o,e){this.queue.push({value:o,cost:e}),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};U.exports=a},8314:(U,a,o)=>{const e=o(2836),r=o(9460),n=o(7030),t=o(6511);function i(s,u,l,f,v){const _=[].slice.call(arguments,1),y=_.length,b="function"==typeof _[y-1];if(!b&&!e())throw new Error("Callback required as last argument");if(!b){if(y<1)throw new Error("Too few arguments provided");return 1===y?(l=u,u=f=void 0):2===y&&!u.getContext&&(f=l,l=u,u=void 0),new Promise(function(T,D){try{const P=r.create(l,f);T(s(P,u,f))}catch(P){D(P)}})}if(y<2)throw new Error("Too few arguments provided");2===y?(v=l,l=u,u=f=void 0):3===y&&(u.getContext&&typeof v>"u"?(v=f,f=void 0):(v=f,f=l,l=u,u=void 0));try{const T=r.create(l,f);v(null,s(T,u,f))}catch(T){v(T)}}a.create=r.create,a.toCanvas=i.bind(null,n.render),a.toDataURL=i.bind(null,n.renderToDataURL),a.toString=i.bind(null,function(s,u,l){return t.render(s,l)})},2836:U=>{U.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},6214:(U,a,o)=>{const e=o(9089).getSymbolSize;a.getRowColCoords=function(n){if(1===n)return[];const t=Math.floor(n/7)+2,i=e(n),s=145===i?26:2*Math.ceil((i-13)/(2*t-2)),u=[i-7];for(let l=1;l<t-1;l++)u[l]=u[l-1]-s;return u.push(6),u.reverse()},a.getPositions=function(n){const t=[],i=a.getRowColCoords(n),s=i.length;for(let u=0;u<s;u++)for(let l=0;l<s;l++)0===u&&0===l||0===u&&l===s-1||u===s-1&&0===l||t.push([i[u],i[l]]);return t}},1018:(U,a,o)=>{const e=o(1677),r=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function n(t){this.mode=e.ALPHANUMERIC,this.data=t}n.getBitsLength=function(i){return 11*Math.floor(i/2)+i%2*6},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(i){let s;for(s=0;s+2<=this.data.length;s+=2){let u=45*r.indexOf(this.data[s]);u+=r.indexOf(this.data[s+1]),i.put(u,11)}this.data.length%2&&i.put(r.indexOf(this.data[s]),6)},U.exports=n},4662:U=>{function a(){this.buffer=[],this.length=0}a.prototype={get:function(o){const e=Math.floor(o/8);return 1==(this.buffer[e]>>>7-o%8&1)},put:function(o,e){for(let r=0;r<e;r++)this.putBit(1==(o>>>e-r-1&1))},getLengthInBits:function(){return this.length},putBit:function(o){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),o&&(this.buffer[e]|=128>>>this.length%8),this.length++}},U.exports=a},5941:U=>{function a(o){if(!o||o<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=o,this.data=new Uint8Array(o*o),this.reservedBit=new Uint8Array(o*o)}a.prototype.set=function(o,e,r,n){const t=o*this.size+e;this.data[t]=r,n&&(this.reservedBit[t]=!0)},a.prototype.get=function(o,e){return this.data[o*this.size+e]},a.prototype.xor=function(o,e,r){this.data[o*this.size+e]^=r},a.prototype.isReserved=function(o,e){return this.reservedBit[o*this.size+e]},U.exports=a},4969:(U,a,o)=>{const e=o(1677);function r(n){this.mode=e.BYTE,this.data="string"==typeof n?(new TextEncoder).encode(n):new Uint8Array(n)}r.getBitsLength=function(t){return 8*t},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(n){for(let t=0,i=this.data.length;t<i;t++)n.put(this.data[t],8)},U.exports=r},3677:(U,a,o)=>{const e=o(7424),r=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],n=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];a.getBlocksCount=function(i,s){switch(s){case e.L:return r[4*(i-1)+0];case e.M:return r[4*(i-1)+1];case e.Q:return r[4*(i-1)+2];case e.H:return r[4*(i-1)+3];default:return}},a.getTotalCodewordsCount=function(i,s){switch(s){case e.L:return n[4*(i-1)+0];case e.M:return n[4*(i-1)+1];case e.Q:return n[4*(i-1)+2];case e.H:return n[4*(i-1)+3];default:return}}},7424:(U,a)=>{a.L={bit:1},a.M={bit:0},a.Q={bit:3},a.H={bit:2},a.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},a.from=function(r,n){if(a.isValid(r))return r;try{return function o(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return a.L;case"m":case"medium":return a.M;case"q":case"quartile":return a.Q;case"h":case"high":return a.H;default:throw new Error("Unknown EC Level: "+e)}}(r)}catch{return n}}},6269:(U,a,o)=>{const e=o(9089).getSymbolSize;a.getPositions=function(t){const i=e(t);return[[0,0],[i-7,0],[0,i-7]]}},6254:(U,a,o)=>{const e=o(9089),t=e.getBCHDigit(1335);a.getEncodedBits=function(s,u){const l=s.bit<<3|u;let f=l<<10;for(;e.getBCHDigit(f)-t>=0;)f^=1335<<e.getBCHDigit(f)-t;return 21522^(l<<10|f)}},6686:(U,a)=>{const o=new Uint8Array(512),e=new Uint8Array(256);(function(){let n=1;for(let t=0;t<255;t++)o[t]=n,e[n]=t,n<<=1,256&n&&(n^=285);for(let t=255;t<512;t++)o[t]=o[t-255]})(),a.log=function(n){if(n<1)throw new Error("log("+n+")");return e[n]},a.exp=function(n){return o[n]},a.mul=function(n,t){return 0===n||0===t?0:o[e[n]+e[t]]}},3264:(U,a,o)=>{const e=o(1677),r=o(9089);function n(t){this.mode=e.KANJI,this.data=t}n.getBitsLength=function(i){return 13*i},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(t){let i;for(i=0;i<this.data.length;i++){let s=r.toSJIS(this.data[i]);if(s>=33088&&s<=40956)s-=33088;else{if(!(s>=57408&&s<=60351))throw new Error("Invalid SJIS character: "+this.data[i]+"\nMake sure your charset is UTF-8");s-=49472}s=192*(s>>>8&255)+(255&s),t.put(s,13)}},U.exports=n},3361:(U,a)=>{a.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};function e(r,n,t){switch(r){case a.Patterns.PATTERN000:return(n+t)%2==0;case a.Patterns.PATTERN001:return n%2==0;case a.Patterns.PATTERN010:return t%3==0;case a.Patterns.PATTERN011:return(n+t)%3==0;case a.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(t/3))%2==0;case a.Patterns.PATTERN101:return n*t%2+n*t%3==0;case a.Patterns.PATTERN110:return(n*t%2+n*t%3)%2==0;case a.Patterns.PATTERN111:return(n*t%3+(n+t)%2)%2==0;default:throw new Error("bad maskPattern:"+r)}}a.isValid=function(n){return null!=n&&""!==n&&!isNaN(n)&&n>=0&&n<=7},a.from=function(n){return a.isValid(n)?parseInt(n,10):void 0},a.getPenaltyN1=function(n){const t=n.size;let i=0,s=0,u=0,l=null,f=null;for(let v=0;v<t;v++){s=u=0,l=f=null;for(let _=0;_<t;_++){let y=n.get(v,_);y===l?s++:(s>=5&&(i+=s-5+3),l=y,s=1),y=n.get(_,v),y===f?u++:(u>=5&&(i+=u-5+3),f=y,u=1)}s>=5&&(i+=s-5+3),u>=5&&(i+=u-5+3)}return i},a.getPenaltyN2=function(n){const t=n.size;let i=0;for(let s=0;s<t-1;s++)for(let u=0;u<t-1;u++){const l=n.get(s,u)+n.get(s,u+1)+n.get(s+1,u)+n.get(s+1,u+1);(4===l||0===l)&&i++}return 3*i},a.getPenaltyN3=function(n){const t=n.size;let i=0,s=0,u=0;for(let l=0;l<t;l++){s=u=0;for(let f=0;f<t;f++)s=s<<1&2047|n.get(l,f),f>=10&&(1488===s||93===s)&&i++,u=u<<1&2047|n.get(f,l),f>=10&&(1488===u||93===u)&&i++}return 40*i},a.getPenaltyN4=function(n){let t=0;const i=n.data.length;for(let u=0;u<i;u++)t+=n.data[u];return 10*Math.abs(Math.ceil(100*t/i/5)-10)},a.applyMask=function(n,t){const i=t.size;for(let s=0;s<i;s++)for(let u=0;u<i;u++)t.isReserved(u,s)||t.xor(u,s,e(n,u,s))},a.getBestMask=function(n,t){const i=Object.keys(a.Patterns).length;let s=0,u=1/0;for(let l=0;l<i;l++){t(l),a.applyMask(l,n);const f=a.getPenaltyN1(n)+a.getPenaltyN2(n)+a.getPenaltyN3(n)+a.getPenaltyN4(n);a.applyMask(l,n),f<u&&(u=f,s=l)}return s}},1677:(U,a,o)=>{const e=o(377),r=o(9359);a.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},a.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},a.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},a.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},a.MIXED={bit:-1},a.getCharCountIndicator=function(i,s){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!e.isValid(s))throw new Error("Invalid version: "+s);return s>=1&&s<10?i.ccBits[0]:s<27?i.ccBits[1]:i.ccBits[2]},a.getBestModeForData=function(i){return r.testNumeric(i)?a.NUMERIC:r.testAlphanumeric(i)?a.ALPHANUMERIC:r.testKanji(i)?a.KANJI:a.BYTE},a.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},a.isValid=function(i){return i&&i.bit&&i.ccBits},a.from=function(i,s){if(a.isValid(i))return i;try{return function n(t){if("string"!=typeof t)throw new Error("Param is not a string");switch(t.toLowerCase()){case"numeric":return a.NUMERIC;case"alphanumeric":return a.ALPHANUMERIC;case"kanji":return a.KANJI;case"byte":return a.BYTE;default:throw new Error("Unknown mode: "+t)}}(i)}catch{return s}}},6628:(U,a,o)=>{const e=o(1677);function r(n){this.mode=e.NUMERIC,this.data=n.toString()}r.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(t){let i,s,u;for(i=0;i+3<=this.data.length;i+=3)s=this.data.substr(i,3),u=parseInt(s,10),t.put(u,10);const l=this.data.length-i;l>0&&(s=this.data.substr(i),u=parseInt(s,10),t.put(u,3*l+1))},U.exports=r},1744:(U,a,o)=>{const e=o(6686);a.mul=function(n,t){const i=new Uint8Array(n.length+t.length-1);for(let s=0;s<n.length;s++)for(let u=0;u<t.length;u++)i[s+u]^=e.mul(n[s],t[u]);return i},a.mod=function(n,t){let i=new Uint8Array(n);for(;i.length-t.length>=0;){const s=i[0];for(let l=0;l<t.length;l++)i[l]^=e.mul(t[l],s);let u=0;for(;u<i.length&&0===i[u];)u++;i=i.slice(u)}return i},a.generateECPolynomial=function(n){let t=new Uint8Array([1]);for(let i=0;i<n;i++)t=a.mul(t,new Uint8Array([1,e.exp(i)]));return t}},9460:(U,a,o)=>{const e=o(9089),r=o(7424),n=o(4662),t=o(5941),i=o(6214),s=o(6269),u=o(3361),l=o(3677),f=o(6289),v=o(1252),_=o(6254),y=o(1677),b=o(2868);function N(I,A,R){const w=I.size,h=_.getEncodedBits(A,R);let E,g;for(E=0;E<15;E++)g=1==(h>>E&1),I.set(E<6?E:E<8?E+1:w-15+E,8,g,!0),I.set(8,E<8?w-E-1:E<9?15-E-1+1:15-E-1,g,!0);I.set(w-8,8,1,!0)}function x(I,A,R,w){let h;if(Array.isArray(I))h=b.fromArray(I);else{if("string"!=typeof I)throw new Error("Invalid data");{let $=A;if(!$){const j=b.rawSplit(I);$=v.getBestVersionForData(j,R)}h=b.fromString(I,$||40)}}const E=v.getBestVersionForData(h,R);if(!E)throw new Error("The amount of data is too big to be stored in a QR Code");if(A){if(A<E)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+E+".\n")}else A=E;const g=function S(I,A,R){const w=new n;R.forEach(function(C){w.put(C.mode.bit,4),w.put(C.getLength(),y.getCharCountIndicator(C.mode,I)),C.write(w)});const g=8*(e.getSymbolTotalCodewords(I)-l.getTotalCodewordsCount(I,A));for(w.getLengthInBits()+4<=g&&w.put(0,4);w.getLengthInBits()%8!=0;)w.putBit(0);const p=(g-w.getLengthInBits())/8;for(let C=0;C<p;C++)w.put(C%2?17:236,8);return function k(I,A,R){const w=e.getSymbolTotalCodewords(A),E=w-l.getTotalCodewordsCount(A,R),g=l.getBlocksCount(A,R),C=g-w%g,$=Math.floor(w/g),j=Math.floor(E/g),q=j+1,z=$-j,ot=new f(z);let H=0;const K=new Array(g),tt=new Array(g);let X=0;const rt=new Uint8Array(I.buffer);for(let Y=0;Y<g;Y++){const Q=Y<C?j:q;K[Y]=rt.slice(H,H+Q),tt[Y]=ot.encode(K[Y]),H+=Q,X=Math.max(X,Q)}const J=new Uint8Array(w);let O,V,et=0;for(O=0;O<X;O++)for(V=0;V<g;V++)O<K[V].length&&(J[et++]=K[V][O]);for(O=0;O<z;O++)for(V=0;V<g;V++)J[et++]=tt[V][O];return J}(w,I,A)}(A,R,h),p=e.getSymbolSize(A),C=new t(p);return function T(I,A){const R=I.size,w=s.getPositions(A);for(let h=0;h<w.length;h++){const E=w[h][0],g=w[h][1];for(let p=-1;p<=7;p++)if(!(E+p<=-1||R<=E+p))for(let C=-1;C<=7;C++)g+C<=-1||R<=g+C||I.set(E+p,g+C,p>=0&&p<=6&&(0===C||6===C)||C>=0&&C<=6&&(0===p||6===p)||p>=2&&p<=4&&C>=2&&C<=4,!0)}}(C,A),function D(I){const A=I.size;for(let R=8;R<A-8;R++){const w=R%2==0;I.set(R,6,w,!0),I.set(6,R,w,!0)}}(C),function P(I,A){const R=i.getPositions(A);for(let w=0;w<R.length;w++){const h=R[w][0],E=R[w][1];for(let g=-2;g<=2;g++)for(let p=-2;p<=2;p++)I.set(h+g,E+p,-2===g||2===g||-2===p||2===p||0===g&&0===p,!0)}}(C,A),N(C,R,0),A>=7&&function B(I,A){const R=I.size,w=v.getEncodedBits(A);let h,E,g;for(let p=0;p<18;p++)h=Math.floor(p/3),E=p%3+R-8-3,g=1==(w>>p&1),I.set(h,E,g,!0),I.set(E,h,g,!0)}(C,A),function F(I,A){const R=I.size;let w=-1,h=R-1,E=7,g=0;for(let p=R-1;p>0;p-=2)for(6===p&&p--;;){for(let C=0;C<2;C++)if(!I.isReserved(h,p-C)){let $=!1;g<A.length&&($=1==(A[g]>>>E&1)),I.set(h,p-C,$),E--,-1===E&&(g++,E=7)}if(h+=w,h<0||R<=h){h-=w,w=-w;break}}}(C,g),isNaN(w)&&(w=u.getBestMask(C,N.bind(null,C,R))),u.applyMask(w,C),N(C,R,w),{modules:C,version:A,errorCorrectionLevel:R,maskPattern:w,segments:h}}a.create=function(A,R){if(typeof A>"u"||""===A)throw new Error("No input text");let h,E,w=r.M;return typeof R<"u"&&(w=r.from(R.errorCorrectionLevel,r.M),h=v.from(R.version),E=u.from(R.maskPattern),R.toSJISFunc&&e.setToSJISFunction(R.toSJISFunc)),x(A,h,w,E)}},6289:(U,a,o)=>{const e=o(1744);function r(n){this.genPoly=void 0,this.degree=n,this.degree&&this.initialize(this.degree)}r.prototype.initialize=function(t){this.degree=t,this.genPoly=e.generateECPolynomial(this.degree)},r.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const i=new Uint8Array(t.length+this.degree);i.set(t);const s=e.mod(i,this.genPoly),u=this.degree-s.length;if(u>0){const l=new Uint8Array(this.degree);return l.set(s,u),l}return s},U.exports=r},9359:(U,a)=>{const o="[0-9]+";let r="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";r=r.replace(/u/g,"\\u");const n="(?:(?![A-Z0-9 $%*+\\-./:]|"+r+")(?:.|[\r\n]))+";a.KANJI=new RegExp(r,"g"),a.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),a.BYTE=new RegExp(n,"g"),a.NUMERIC=new RegExp(o,"g"),a.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const t=new RegExp("^"+r+"$"),i=new RegExp("^"+o+"$"),s=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");a.testKanji=function(l){return t.test(l)},a.testNumeric=function(l){return i.test(l)},a.testAlphanumeric=function(l){return s.test(l)}},2868:(U,a,o)=>{const e=o(1677),r=o(6628),n=o(1018),t=o(4969),i=o(3264),s=o(9359),u=o(9089),l=o(243);function f(B){return unescape(encodeURIComponent(B)).length}function v(B,N,F){const S=[];let k;for(;null!==(k=B.exec(F));)S.push({data:k[0],index:k.index,mode:N,length:k[0].length});return S}function _(B){const N=v(s.NUMERIC,e.NUMERIC,B),F=v(s.ALPHANUMERIC,e.ALPHANUMERIC,B);let S,k;return u.isKanjiModeEnabled()?(S=v(s.BYTE,e.BYTE,B),k=v(s.KANJI,e.KANJI,B)):(S=v(s.BYTE_KANJI,e.BYTE,B),k=[]),N.concat(F,S,k).sort(function(I,A){return I.index-A.index}).map(function(I){return{data:I.data,mode:I.mode,length:I.length}})}function y(B,N){switch(N){case e.NUMERIC:return r.getBitsLength(B);case e.ALPHANUMERIC:return n.getBitsLength(B);case e.KANJI:return i.getBitsLength(B);case e.BYTE:return t.getBitsLength(B)}}function P(B,N){let F;const S=e.getBestModeForData(B);if(F=e.from(N,S),F!==e.BYTE&&F.bit<S.bit)throw new Error('"'+B+'" cannot be encoded with mode '+e.toString(F)+".\n Suggested mode is: "+e.toString(S));switch(F===e.KANJI&&!u.isKanjiModeEnabled()&&(F=e.BYTE),F){case e.NUMERIC:return new r(B);case e.ALPHANUMERIC:return new n(B);case e.KANJI:return new i(B);case e.BYTE:return new t(B)}}a.fromArray=function(N){return N.reduce(function(F,S){return"string"==typeof S?F.push(P(S,null)):S.data&&F.push(P(S.data,S.mode)),F},[])},a.fromString=function(N,F){const k=function T(B){const N=[];for(let F=0;F<B.length;F++){const S=B[F];switch(S.mode){case e.NUMERIC:N.push([S,{data:S.data,mode:e.ALPHANUMERIC,length:S.length},{data:S.data,mode:e.BYTE,length:S.length}]);break;case e.ALPHANUMERIC:N.push([S,{data:S.data,mode:e.BYTE,length:S.length}]);break;case e.KANJI:N.push([S,{data:S.data,mode:e.BYTE,length:f(S.data)}]);break;case e.BYTE:N.push([{data:S.data,mode:e.BYTE,length:f(S.data)}])}}return N}(_(N,u.isKanjiModeEnabled())),x=function D(B,N){const F={},S={start:{}};let k=["start"];for(let x=0;x<B.length;x++){const I=B[x],A=[];for(let R=0;R<I.length;R++){const w=I[R],h=""+x+R;A.push(h),F[h]={node:w,lastCount:0},S[h]={};for(let E=0;E<k.length;E++){const g=k[E];F[g]&&F[g].node.mode===w.mode?(S[g][h]=y(F[g].lastCount+w.length,w.mode)-y(F[g].lastCount,w.mode),F[g].lastCount+=w.length):(F[g]&&(F[g].lastCount=w.length),S[g][h]=y(w.length,w.mode)+4+e.getCharCountIndicator(w.mode,N))}}k=A}for(let x=0;x<k.length;x++)S[k[x]].end=0;return{map:S,table:F}}(k,F),I=l.find_path(x.map,"start","end"),A=[];for(let R=1;R<I.length-1;R++)A.push(x.table[I[R]].node);return a.fromArray(function b(B){return B.reduce(function(N,F){const S=N.length-1>=0?N[N.length-1]:null;return S&&S.mode===F.mode?(N[N.length-1].data+=F.data,N):(N.push(F),N)},[])}(A))},a.rawSplit=function(N){return a.fromArray(_(N,u.isKanjiModeEnabled()))}},9089:(U,a)=>{let o;const e=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];a.getSymbolSize=function(n){if(!n)throw new Error('"version" cannot be null or undefined');if(n<1||n>40)throw new Error('"version" should be in range from 1 to 40');return 4*n+17},a.getSymbolTotalCodewords=function(n){return e[n]},a.getBCHDigit=function(r){let n=0;for(;0!==r;)n++,r>>>=1;return n},a.setToSJISFunction=function(n){if("function"!=typeof n)throw new Error('"toSJISFunc" is not a valid function.');o=n},a.isKanjiModeEnabled=function(){return typeof o<"u"},a.toSJIS=function(n){return o(n)}},377:(U,a)=>{a.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}},1252:(U,a,o)=>{const e=o(9089),r=o(3677),n=o(7424),t=o(1677),i=o(377),u=e.getBCHDigit(7973);function f(y,b){return t.getCharCountIndicator(y,b)+4}function v(y,b){let T=0;return y.forEach(function(D){const P=f(D.mode,b);T+=P+D.getBitsLength()}),T}a.from=function(b,T){return i.isValid(b)?parseInt(b,10):T},a.getCapacity=function(b,T,D){if(!i.isValid(b))throw new Error("Invalid QR Code version");typeof D>"u"&&(D=t.BYTE);const N=8*(e.getSymbolTotalCodewords(b)-r.getTotalCodewordsCount(b,T));if(D===t.MIXED)return N;const F=N-f(D,b);switch(D){case t.NUMERIC:return Math.floor(F/10*3);case t.ALPHANUMERIC:return Math.floor(F/11*2);case t.KANJI:return Math.floor(F/13);default:return Math.floor(F/8)}},a.getBestVersionForData=function(b,T){let D;const P=n.from(T,n.M);if(Array.isArray(b)){if(b.length>1)return function _(y,b){for(let T=1;T<=40;T++)if(v(y,T)<=a.getCapacity(T,b,t.MIXED))return T}(b,P);if(0===b.length)return 1;D=b[0]}else D=b;return function l(y,b,T){for(let D=1;D<=40;D++)if(b<=a.getCapacity(D,T,y))return D}(D.mode,D.getLength(),P)},a.getEncodedBits=function(b){if(!i.isValid(b)||b<7)throw new Error("Invalid QR Code version");let T=b<<12;for(;e.getBCHDigit(T)-u>=0;)T^=7973<<e.getBCHDigit(T)-u;return b<<12|T}},7030:(U,a,o)=>{const e=o(7077);a.render=function(i,s,u){let l=u,f=s;typeof l>"u"&&(!s||!s.getContext)&&(l=s,s=void 0),s||(f=function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}()),l=e.getOptions(l);const v=e.getImageWidth(i.modules.size,l),_=f.getContext("2d"),y=_.createImageData(v,v);return e.qrToImageData(y.data,i,l),function r(t,i,s){t.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=s,i.width=s,i.style.height=s+"px",i.style.width=s+"px"}(_,f,v),_.putImageData(y,0,0),f},a.renderToDataURL=function(i,s,u){let l=u;return typeof l>"u"&&(!s||!s.getContext)&&(l=s,s=void 0),l||(l={}),a.render(i,s,l).toDataURL(l.type||"image/png",(l.rendererOpts||{}).quality)}},6511:(U,a,o)=>{const e=o(7077);function r(i,s){const u=i.a/255,l=s+'="'+i.hex+'"';return u<1?l+" "+s+'-opacity="'+u.toFixed(2).slice(1)+'"':l}function n(i,s,u){let l=i+s;return typeof u<"u"&&(l+=" "+u),l}a.render=function(s,u,l){const f=e.getOptions(u),v=s.modules.size,_=s.modules.data,y=v+2*f.margin,b=f.color.light.a?"<path "+r(f.color.light,"fill")+' d="M0 0h'+y+"v"+y+'H0z"/>':"",T="<path "+r(f.color.dark,"stroke")+' d="'+function t(i,s,u){let l="",f=0,v=!1,_=0;for(let y=0;y<i.length;y++){const b=Math.floor(y%s),T=Math.floor(y/s);!b&&!v&&(v=!0),i[y]?(_++,y>0&&b>0&&i[y-1]||(l+=v?n("M",b+u,.5+T+u):n("m",f,0),f=0,v=!1),b+1<s&&i[y+1]||(l+=n("h",_),_=0)):f++}return l}(_,v,f.margin)+'"/>',B='<svg xmlns="http://www.w3.org/2000/svg" '+(f.width?'width="'+f.width+'" height="'+f.width+'" ':"")+'viewBox="0 0 '+y+" "+y+'" shape-rendering="crispEdges">'+b+T+"</svg>\n";return"function"==typeof l&&l(null,B),B}},7077:(U,a)=>{function o(e){if("number"==typeof e&&(e=e.toString()),"string"!=typeof e)throw new Error("Color should be defined as hex string");let r=e.slice().replace("#","").split("");if(r.length<3||5===r.length||r.length>8)throw new Error("Invalid hex color: "+e);(3===r.length||4===r.length)&&(r=Array.prototype.concat.apply([],r.map(function(t){return[t,t]}))),6===r.length&&r.push("F","F");const n=parseInt(r.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:255&n,hex:"#"+r.slice(0,6).join("")}}a.getOptions=function(r){r||(r={}),r.color||(r.color={});const t=r.width&&r.width>=21?r.width:void 0;return{width:t,scale:t?4:r.scale||4,margin:typeof r.margin>"u"||null===r.margin||r.margin<0?4:r.margin,color:{dark:o(r.color.dark||"#000000ff"),light:o(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},a.getScale=function(r,n){return n.width&&n.width>=r+2*n.margin?n.width/(r+2*n.margin):n.scale},a.getImageWidth=function(r,n){const t=a.getScale(r,n);return Math.floor((r+2*n.margin)*t)},a.qrToImageData=function(r,n,t){const i=n.modules.size,s=n.modules.data,u=a.getScale(i,t),l=Math.floor((i+2*t.margin)*u),f=t.margin*u,v=[t.color.light,t.color.dark];for(let _=0;_<l;_++)for(let y=0;y<l;y++){let b=4*(_*l+y),T=t.color.light;_>=f&&y>=f&&_<l-f&&y<l-f&&(T=v[s[Math.floor((_-f)/u)*i+Math.floor((y-f)/u)]?1:0]),r[b++]=T.r,r[b++]=T.g,r[b++]=T.b,r[b]=T.a}}}}]);